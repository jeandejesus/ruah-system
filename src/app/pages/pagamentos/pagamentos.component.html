<div class="container mt-4">
  <h2>Clientes e Status de Pagamento</h2>

  <!-- Search Input -->
  <div class="mb-3">
    <input
      type="text"
      class="form-control search-input"
      placeholder="Buscar por nome ou email..."
      [value]="searchText"
      (input)="onSearch($event)"
    />
  </div>

  <div class="container my-4">
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
      <div class="col" *ngFor="let customer of customers">
        <div class="card text-center shadow-sm">
          <div class="card-body">
            <h5 class="card-title">{{ customer.name }}</h5>
            <a
              class="card-text text-muted d-block"
              target="_blank"
              [href]="getWhatsappLink(customer)"
            >
              {{ customer.phone }}
            </a>

            <span
              class="badge px-3 py-2 m-2"
              [class]="
                customer.subscriptions[0].payment_error
                  ? 'badge-danger'
                  : 'badge-success '
              "
            >
              {{
                customer.subscriptions[0].payment_error || "Assinatura ativa"
              }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="table-responsive">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Nome</th>
          <th class="d-none d-md-table-cell">Status de Pagamento</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let customer of customers">
          <td>{{ customer.name }}</td>
          <td
            class="email-column"
            [class]="
              customer.subscriptions[0].payment_error
                ? 'badge-danger'
                : 'badge-success '
            "
          >
            {{ customer.subscriptions[0].payment_error || "Assinatura ativa" }}
          </td>
        </tr>
      </tbody>
    </table>
  </div> -->

    <!-- Loading Spinner -->
    <div class="d-flex justify-content-center my-3" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Carregando...</span>
      </div>
    </div>

    <!-- Load More Button -->
    <div class="text-center mt-3" *ngIf="hasMore && !loading">
      <button class="btn btn-primary" (click)="loadMore()">
        Carregar Mais
      </button>
    </div>

    <!-- No Results Message -->
    <div class="text-center mt-3" *ngIf="customers.length === 0 && !loading">
      <p>Nenhum cliente encontrado.</p>
    </div>
  </div>
</div>
