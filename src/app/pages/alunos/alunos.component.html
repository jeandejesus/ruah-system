<form (ngSubmit)="onSubmit()" class="mt-4">
  <div class="row">
    <div class="col-md-6 col-12 mb-3">
      <label for="name" class="form-label">Nome</label>
      <input
        type="text"
        class="form-control"
        id="name"
        [(ngModel)]="aluno.name"
        name="name"
        placeholder="Nome completo"
        required
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="cpf" class="form-label">CPF</label>
      <input
        type="text"
        class="form-control"
        id="cpf"
        [(ngModel)]="aluno.cpf"
        name="cpf"
        mask="000.000.000-00"
        placeholder="000.000.000-00"
        required
      />
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 col-12 mb-3">
      <label for="rg" class="form-label">RG</label>
      <input
        type="text"
        class="form-control"
        id="rg"
        [(ngModel)]="aluno.rg"
        name="rg"
        mask="00.000.000-0"
        placeholder="00.000.000-0"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="birthDate" class="form-label">Data de Nascimento</label>
      <input
        type="text"
        class="form-control"
        id="birthDate"
        name="birthDate"
        [(ngModel)]="aluno.birthDate"
        mask="00/00/0000"
        placeholder="DD/MM/AAAA"
      />
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 col-12 mb-3">
      <label for="phone" class="form-label">Telefone</label>
      <input
        type="text"
        class="form-control"
        id="phone"
        [(ngModel)]="aluno.phone"
        name="phone"
        mask="(00) 00000-0000"
        placeholder="(00) 00000-0000"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        class="form-control"
        id="email"
        [(ngModel)]="aluno.email"
        name="email"
        placeholder="exemplo@email.com"
      />
    </div>
  </div>

  <div class="row">
    <div class="col-md-6 col-12 mb-3">
      <label for="address" class="form-label">Endereço</label>
      <input
        type="text"
        class="form-control"
        id="address"
        [(ngModel)]="aluno.address"
        name="address"
        placeholder="Rua, Número, Bairro, Cidade"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="emergencyContactName" class="form-label"
        >Contato de Emergência (Nome)</label
      >
      <input
        type="text"
        class="form-control"
        id="emergencyContactName"
        [(ngModel)]="aluno.emergencyContact.name"
        name="emergencyContactName"
        placeholder="Nome do contato de emergência"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="responsiblePhone" class="form-label"
        >Contato de emergência (Telefone)</label
      >
      <input
        type="text"
        class="form-control"
        id="responsiblePhone"
        [(ngModel)]="aluno.emergencyContact.phone"
        name="responsiblePhone"
        mask="(00) 00000-0000"
        placeholder="(00) 00000-0000"
      />
    </div>
    <div class="col-md-6 col-12 mb-3">
      <label for="turmas" class="form-label">Turmas</label>
      <ng-select
        [items]="turmas"
        bindLabel="name"
        bindValue="_id"
        [(ngModel)]="aluno.turmas"
        [ngModelOptions]="{ standalone: true }"
        name="turmas"
        [multiple]="true"
        [searchable]="true"
        [closeOnSelect]="true"
        [virtualScroll]="true"
        [loading]="isLoading"
        class="form-control"
      >
      </ng-select>
    </div>
  </div>
  <div class="row check-bock mb-3">
    <div>
      <input
        type="checkbox"
        class="form-check-input"
        id="isPix"
        [(ngModel)]="aluno.isPix"
        name="isPix"
      />
      <label class="form-check-label" for="isPix"> Pagamento via Pix? </label>
    </div>
    <div class="col mt-3" *ngIf="aluno.isPix">
      <label for="billingDay">Dia do pagamento</label>
      <input
        id="billingDay"
        type="number"
        min="1"
        max="31"
        class="form-control"
        [(ngModel)]="aluno.billingDay"
        name="billingDay"
        required
      />
    </div>

    <div class="col mt-3" *ngIf="aluno.isPix">
      <label for="monthlyFee">Valor da mensalidade</label>
      <input
        id="monthlyFee"
        type="text"
        class="form-control"
        [(ngModel)]="aluno.monthlyFee"
        name="monthlyFee"
        placeholder="R$ 0,00"
        (ngModelChange)="formatMonthlyFee($event)"
      />
    </div>
  </div>

  <div class="row">
    <div class="col">
      <input
        type="checkbox"
        class="form-check-input"
        id="isMinor"
        [(ngModel)]="aluno.isMinor"
        name="isMinor"
      />
      <label class="form-check-label" for="isMinor">É menor de idade?</label>
    </div>
  </div>

  <div class="row" *ngIf="aluno.isMinor">
    <div class="col-md-6 col-12 mb-3">
      <label for="responsibleName" class="form-label">Responsável (Nome)</label>
      <input
        type="text"
        class="form-control"
        id="responsibleName"
        [(ngModel)]="aluno.responsible.name"
        name="responsibleName"
        placeholder="Nome do responsável"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="responsibleCpf" class="form-label">Responsável (CPF)</label>
      <input
        type="text"
        class="form-control"
        id="responsibleCpf"
        [(ngModel)]="aluno.responsible.cpf"
        name="responsibleCpf"
        mask="000.000.000-00"
        placeholder="000.000.000-00"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="responsibleRg" class="form-label">Responsável (RG)</label>
      <input
        type="text"
        class="form-control"
        id="responsibleRg"
        [(ngModel)]="aluno.responsible.rg"
        name="responsibleRg"
        mask="00.000.000-0"
        placeholder="00.000.000-0"
      />
    </div>

    <div class="col-md-6 col-12 mb-3">
      <label for="responsiblePhone" class="form-label"
        >Responsável (Telefone)</label
      >
      <input
        type="text"
        class="form-control"
        id="responsiblePhone"
        [(ngModel)]="aluno.responsible.phone"
        name="responsiblePhone"
        mask="(00) 00000-0000"
        placeholder="(00) 00000-0000"
      />
    </div>
  </div>

  <div class="row justify-content-center mt-3">
    <button type="submit" class="btn btn-primary col-3 m-2">
      {{ editMode ? "Atualizar" : "Cadastrar" }}
    </button>
  </div>
</form>
