<app-loading-spinner [isLoading]="carregando"></app-loading-spinner>

<div class="mt-4 container" *ngIf="!carregando">
  <h2>Gerenciamento de Locais</h2>
  <button class="btn btn-primary" (click)="abrirModal()">Novo Local</button>

  <div class="card-container">
    <div class="card" *ngFor="let local of locais">
      <div class="card-header">
        <h5 class="local-name">{{ local.name }}</h5>
      </div>

      <div class="card-body">
        <div class="detail-group">
          <label>Endereço:</label>
          <p>{{ local.address }}</p>
        </div>
      </div>

      <div class="card-footer">
        <button class="btn btn-primary" (click)="editarLocal(local)">
          <i class="bi bi-pencil-square"></i>
          Editar
        </button>
        <button class="btn btn-danger" (click)="excluirLocal(local._id)">
          <i class="bi bi-trash-fill"></i>
          Excluir
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="localModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          {{ editando ? "Editar Local" : "Novo Local" }}
        </h5>
        <button
          type="button"
          class="btn-close"
          (click)="fecharModal()"
        ></button>
      </div>
      <div class="modal-body">
        <form (ngSubmit)="salvarLocal()">
          <div class="mb-3">
            <label class="form-label">Nome</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="localAtual.name"
              name="name"
              required
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Endereço</label>
            <input
              type="text"
              class="form-control"
              [(ngModel)]="localAtual.address"
              name="address"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </form>
      </div>
    </div>
  </div>
</div>
